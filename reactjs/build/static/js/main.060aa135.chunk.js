(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{51:function(e,t,n){e.exports=n(89)},56:function(e,t,n){},58:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(42),l=n.n(r),s=(n(56),n(4)),o=n.n(s),i=n(16),u=n(13),m=(n(58),n(20)),p=n.n(m);n(76).config();var f="https://checkin.cloudority.com",d=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],l=Object(a.useState)([]),s=Object(u.a)(l,2),m=s[0],d=s[1],h=Object(a.useState)(""),b=Object(u.a)(h,2),E=b[0],v=b[1];function g(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+(e.getHours()+":"+e.getMinutes()+":"+e.getSeconds())}var y=function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("".concat(f,"/stats"));case 3:t=e.sent,console.log(t.data),d(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=g,e.next=4,fetch("".concat(f,"/registrants/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 4:x(),y(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=g,e.next=4,fetch("".concat(f,"/registrants/medical/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 4:x(),y(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get(f.concat("/registrants"));case 3:t=e.sent,console.log(t.data),r(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){x(),y()}),[]),c.a.createElement("div",{className:"checkin"},c.a.createElement("form",{class:"form-inline"},c.a.createElement("span",null,c.a.createElement("img",{src:"https://avatars.planningcenteronline.com/uploads/organization/217202-1482195203/avatar.1.png",alt:"Main Church"}),"OCM Event Registration List (\u4e2d\u83ef\u6d77\u5916\u5ba3\u9053\u6703) "),c.a.createElement("div",{class:"container-fluid"}),c.a.createElement("input",{className:"form-control input-lg m-2",type:"search",placeholder:"Type anything to search","aria-label":"Search",size:"35",value:E,onChange:function(e){return v(e.target.value)}}),c.a.createElement("button",{key:"refreshBtn",type:"button",class:"btn btn-outline-info m-2",onClick:function(){return fetch("".concat(f,"/v2/refresh-master")),console.log("fetch success for master"),fetch("".concat(f,"/v2/refresh-mandarin")),console.log("fetch success for mando"),fetch("".concat(f,"/v2/refresh-cantonese")),console.log("fetch success for canto"),fetch("".concat(f,"/v2/refresh-english")),console.log("fetch success for english"),fetch("".concat(f,"/v2/refresh-mando-canto")),fetch("".concat(f,"/v2/refresh-fellowship")),console.log("fetch success for fellowship"),fetch("".concat(f,"/v2/refresh-child")),console.log("fetch success for child"),void(window.location="/")}}," refresh "),c.a.createElement("b",null),c.a.createElement("table",null,c.a.createElement("b",null),c.a.createElement("td",null,c.a.createElement("tr",{class:"table-success"},c.a.createElement("th",null,"Checked-In: "),c.a.createElement("td",null,m.map((function(e){return e.checkedins})))),c.a.createElement("tr",{class:"table-warning"},c.a.createElement("th",null,"Arriving :"),c.a.createElement("td",null,m.map((function(e){return e.arriving})))),c.a.createElement("tr",{class:"table-active"},c.a.createElement("th",null,"Registration:  "),c.a.createElement("td",null,m.map((function(e){return parseInt(e.arriving)+parseInt(e.checkedins)}))))),c.a.createElement("td",null,c.a.createElement("tr",{class:"table-success"},c.a.createElement("th",null,"Vaccinated: "),c.a.createElement("td",null,m.map((function(e){return e.vaccinated})))),c.a.createElement("tr",{class:"table-warning-v"},c.a.createElement("th",null,"Vulnerables :"),c.a.createElement("td",null,m.map((function(e){return e.vulnerables})))),c.a.createElement("tr",{class:"table-active"},c.a.createElement("th",null,"Rate (%) :  "),c.a.createElement("td",null,m.map((function(e){return(100*parseInt(e.vaccinated)/(parseInt(e.vaccinated)+parseInt(e.vulnerables))).toFixed(2)}))))))),n.filter((function(e){return""===E||e.lname.concat(" ").concat(e.fname).toLowerCase().includes(E.toLowerCase())?e:void 0})).map((function(e){return e.checkedin_flag?c.a.createElement("div",{className:"box-container"},c.a.createElement("div",{key:e.pid,align:"left",className:e.checkedin_flag?"true":"false"},c.a.createElement("b",null,"Name: "),e.lname,", ",e.fname,c.a.createElement("br",null),c.a.createElement("b",null,"Vaccination: "),e.vaccination?"yes":"n/a",c.a.createElement("span",{key:e.people_id,align:"center",className:e.vaccination?"safe":"risk"},c.a.createElement("b",null),c.a.createElement("button",{class:"btn btn-warning btn-smlr",type:"button",id:e.people_id,onClick:function(){w(e.people_id)}},"yes, I have")),c.a.createElement("br",null),c.a.createElement("b",null,"Event: "),e.event_cd,c.a.createElement("br",null),c.a.createElement("b",null,c.a.createElement("img",{src:e.profile,alt:"profile pic",class:"avatar"})),c.a.createElement("b",null,c.a.createElement("button",{type:"button",id:e.pid,className:"btn btn-outline-success",disabled:!0},"Checked In")))):c.a.createElement("div",{className:"box-container"},c.a.createElement("div",{key:e.pid,align:"left",className:e.checkedin_flag?"true":"false"},c.a.createElement("b",null,"Name: "),e.lname,", ",e.fname,c.a.createElement("br",null),c.a.createElement("b",null,"Vaccination: "),e.vaccination?"yes":"n/a",c.a.createElement("span",{key:e.people_id,align:"center",className:e.vaccination?"safe":"risk"},c.a.createElement("b",null),c.a.createElement("button",{class:"btn btn-warning btn-smlr",type:"button",id:e.people_id,onClick:function(){w(e.people_id)}},"yes, I have")),c.a.createElement("br",null),c.a.createElement("b",null,"Event: "),e.event_cd,c.a.createElement("br",null),c.a.createElement("b",null,c.a.createElement("img",{src:e.profile,alt:"profile pic",class:"avatar"})),c.a.createElement("b",null),c.a.createElement("button",{type:"button",id:e.pid,className:"btn btn-outline-success",active:!0,onClick:function(){var t;k(e.pid),t=e.pid,document.getElementById(t).innerText="Checked In"}},"Check Me In")))})))},h=n(109),b=n(110),E=n(106),v=n(107),g=n(108),y=n(43),k=n.n(y),w=n(22),x=n.n(w);var O=Object(g.a)((function(e){return{conatiner:{marginTop:10},title:{display:"flex",justifyContent:"center",alignItems:"center",background:"#3f51b5",color:"#fff",padding:20}}})),j=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],r=t[1],l=O(),s=Object(a.useState)(""),m=Object(u.a)(s,2),f=m[0],d=m[1],g=Object(a.useState)(""),y=Object(u.a)(g,2),w=y[0],j=y[1],C=Object(a.useState)(""),S=Object(u.a)(C,2),N=S[0],I=S[1],_=Object(a.useState)(!1),M=Object(u.a)(_,2),T=M[0],A=M[1],J=Object(a.useState)(""),V=Object(u.a)(J,2),z=(V[0],V[1]),B=new Audio("https://media.geeksforgeeks.org/wp-content/uploads/20190531135120/beep.mp3");function L(){return(L=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!1),e.next=3,x()(3500);case 3:A(!0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return R.apply(this,arguments)}function R(){return(R=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x()(2500);case 2:r(null);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return F.apply(this,arguments)}function F(){return(F=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x()(2500);case 2:j(null);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return W.apply(this,arguments)}function W(){return(W=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x()(2500);case 2:z("");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return c.a.createElement(h.a,{className:l.conatiner},c.a.createElement(b.a,null,c.a.createElement("h2",{className:l.title},c.a.createElement("span",null,c.a.createElement("img",{align:"left",src:"https://avatars.planningcenteronline.com/uploads/organization/217202-1482195203/avatar.1.png",alt:"Main Church"}),"Oversea Chinese Mission (\u4e2d\u83ef\u6d77\u5916\u5ba3\u9053\u6703)")),c.a.createElement(E.a,null,c.a.createElement(v.a,{container:!0,spacing:2},c.a.createElement(v.a,{item:!0,xl:4,lg:4,md:6,sm:12,xs:12},c.a.createElement("h6",null,"Automated Check in System (\u7c21\u6613\u901a\u81ea\u52d5\u5831\u5230)"),c.a.createElement(k.a,{delay:200,style:{width:500,height:500},onError:function(e){console.log(e)},onScan:function(e){e&&(!function(){if(null!=n){var e=n.substring(0,n.indexOf(",")),t=n.substring(n.indexOf(",")+1);p.a.post("http://www.cloudority.com:5000/scan",{people_id:t,household_id:e}).then((function(e){if(e.data.message)d(e.data.message),j(""),I(""),P(),D(),U();else{d("Check in successfull! (\u6210\u529f)"),j("Welcome: "+e.data[0].lname+", "+e.data[0].fname);e.data.length>1?" services":" service",e.data.forEach((function(e){return I(e.event_cd)})),P(),D(),U()}}))}null==n&&null==f&&(d("Processing...\uff08\u9032\u884c\u4e2d)"),I(""))}(),function(){L.apply(this,arguments)}(),r(e),B.play())}})),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(v.a,{item:!0,xl:4,lg:4,md:6,sm:12,xs:12},c.a.createElement("div",{class:"grid-child green"},c.a.createElement("div",{id:"Welcome",hidden:T,style:{position:"relative",left:"150px",top:"30px"}},c.a.createElement("h1",null,"Status:",f),c.a.createElement("h1",null,w,c.a.createElement("br",null),"Service:",N," ",c.a.createElement("br",null)))))))))},C=n(48),S=n(3);var N=function(){return c.a.createElement(C.a,null,c.a.createElement("div",{className:"App"},c.a.createElement(S.c,null,c.a.createElement(S.a,{path:"/",exact:!0,component:d}),c.a.createElement(S.a,{path:"/scan",component:j}))))};l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(N,null)),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.060aa135.chunk.js.map