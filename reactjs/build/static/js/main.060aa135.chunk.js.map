{"version":3,"sources":["CheckinByName.js","scanner.js","App.js","index.js"],"names":["require","config","RegistrationURL","CheckinByName","useState","registrants","setRegistrants","stats","setStats","search","setSearch","today","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getStats","a","axios","get","stdata","console","log","data","error","message","CheckedMein","pid","body","fetch","method","headers","JSON","stringify","getRegistrationData","CheckedVaccineSafe","people_id","person_id","concat","useEffect","className","class","src","alt","type","placeholder","aria-label","size","value","onChange","e","target","key","onClick","window","location","map","ppl","checkedins","arriving","parseInt","vaccinated","vulnerables","toFixed","filter","registrant","lname","fname","toLowerCase","includes","checkedin_flag","align","vaccination","id","event_cd","profile","disabled","active","document","getElementById","innerText","useStyles","makeStyles","theme","conatiner","marginTop","title","display","justifyContent","alignItems","background","color","padding","App","scanResultWebCam","setScanResultWebCam","classes","scanAuth","setScanAuth","userInfo","setUserInfo","userService","setUserService","hidemessage","setHideMessage","setCurrentDate","audio","Audio","sleep","resetScanner","resetName","resetDate","Container","Card","CardContent","Grid","container","spacing","item","xl","lg","md","sm","xs","delay","style","width","height","onError","onScan","result","householdID","substring","indexOf","peopleID","Axios","post","household_id","then","response","length","forEach","element","handleAuthorization","resetdisplay","play","hidden","position","left","top","path","exact","component","Scanner","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.060aa135.chunk.js","sourcesContent":["import \"./App.css\";\r\nimport axios from \"axios\";\r\nimport React, { useEffect, useState } from 'react';\r\nrequire(\"dotenv\").config();\r\n\r\n\r\n//var RegistrationURL=\"http://localhost:5001\";\r\nvar RegistrationURL=\"https://checkin.cloudority.com\";\r\n//var RegistrationURL=\"http://www.cloudority.com:5000\";\r\n//var RegistrationURL=\"http://18e320ae7ebb.ngrok.io\"\r\n\r\nconst CheckinByName = () => {\r\nconst [registrants, setRegistrants]=useState([]);\r\nconst [stats, setStats]=useState([]);\r\nconst [search, setSearch] = useState(\"\");\r\n\r\n\r\n////////////////// retrun today \\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\nfunction today() {\r\n  var today = new Date();\r\n  var date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();\r\n  var time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\r\n  var dateTime = date+' '+time;\r\n  return dateTime;\r\n  }\r\n\r\nfunction syncDB(){\r\n  //disableRefreshButtonStatus(true);\r\n  fetch(`${RegistrationURL}/v2/refresh-master`);\r\n  console.log('fetch success for master');\r\n  fetch(`${RegistrationURL}/v2/refresh-mandarin`);\r\n  console.log('fetch success for mando');\r\n  fetch(`${RegistrationURL}/v2/refresh-cantonese`);\r\n  console.log('fetch success for canto');\r\n  fetch(`${RegistrationURL}/v2/refresh-english`);\r\n  console.log('fetch success for english');\r\n  fetch(`${RegistrationURL}/v2/refresh-mando-canto`);\r\n  //fetch(`${RegistrationURL}/v2/refresh-volunteer`);\r\n  fetch(`${RegistrationURL}/v2/refresh-fellowship`);\r\n  console.log('fetch success for fellowship');\r\n  fetch(`${RegistrationURL}/v2/refresh-child`);\r\n  console.log('fetch success for child');\r\n  /*\r\n  fetch(`${RegistrationURL}/v2/refresh-sp-event`);\r\n  console.log('fetch success for special event');\r\n  */\r\n  window.location = \"/\";\r\n  }\r\n\r\n\r\nconst changeButtonText = (pid) => {\r\n    // document.getElementById(pid).style.visibility = \"hidden\";\r\n    document.getElementById(pid).innerText =\"Checked In\";\r\n\r\n}\r\n\r\n//const disableButton = (cid) => {\r\n//  {document.getElementById(cid).disabled=true;}\r\n  \r\n//}\r\n\r\nconst getStats = async () => {\r\n  try {\r\n    const stdata=await axios.get(`${RegistrationURL}/stats`);\r\n    console.log(stdata.data);\r\n    setStats(stdata.data);\r\n    \r\n  } catch (err) {\r\n    console.error(err.message);\r\n  }\r\n};\r\n\r\nconst CheckedMein = async (pid) => {\r\ntry {\r\n  const body = today;\r\n  await fetch(`${RegistrationURL}/registrants/${pid}`, {\r\n    method: \"PUT\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify(body),\r\n  });\r\n\r\n  getRegistrationData();\r\n  getStats();\r\n\r\n} catch (err) {\r\n  console.error(err.message);\r\n}\r\n};\r\n\r\n\r\nconst CheckedVaccineSafe = async (people_id) => {\r\n  try {\r\n    const person_id = today;\r\n   // console.log(`${RegistrationURL}/registrants/medical/${people_id}`);\r\n    await fetch(`${RegistrationURL}/registrants/medical/${people_id}`, {\r\n      method: \"PUT\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(person_id),\r\n    });\r\n  \r\n    getRegistrationData();\r\n    getStats();\r\n  \r\n  } catch (err) {\r\n    console.error(err.message);\r\n  }\r\n  };\r\n\r\n\r\n\r\n\r\n\r\nconst getRegistrationData = async () =>{\r\n    try {\r\n        const data = await axios.get(RegistrationURL.concat(\"/registrants\"));\r\n        console.log(data.data);\r\n        setRegistrants(data.data);\r\n        \r\n    } catch (err) {\r\n        console.error(err);\r\n    }\r\n};\r\n\r\n    \r\n\r\nuseEffect(()=>{\r\n    getRegistrationData();\r\n    getStats();\r\n}, []);\r\n\r\n    return (\r\n\r\n      <div className=\"checkin\">\r\n     <form class=\"form-inline\">  \r\n      <span><img src='https://avatars.planningcenteronline.com/uploads/organization/217202-1482195203/avatar.1.png' alt=\"Main Church\"/> \r\n             OCM Event Registration List (中華海外宣道會) </span>\r\n      \r\n      <div class=\"container-fluid\"></div>  \r\n     \r\n      <input className=\"form-control input-lg m-2\" \r\n               type=\"search\" \r\n               placeholder=\"Type anything to search\" \r\n               aria-label=\"Search\"\r\n               size=\"35\"\r\n               value={search} \r\n               onChange={e => setSearch(e.target.value)}\r\n\t\t\t/>\r\n      <button key=\"refreshBtn\" type=\"button\" class=\"btn btn-outline-info m-2\" onClick={()=>syncDB()}> refresh </button>\r\n      <b></b>\r\n      <table>\r\n      <b/>        \r\n  <td>\r\n  <tr class=\"table-success\">\r\n    <th>Checked-In: </th><td>{stats.map((ppl) => {return (ppl.checkedins)})}</td>\r\n  </tr>\r\n    <tr class=\"table-warning\">\r\n    <th>Arriving :</th><td>{stats.map((ppl) => {return (ppl.arriving)})}</td>\r\n    </tr>\r\n    <tr class=\"table-active\">\r\n    <th>Registration:  </th><td>{stats.map((ppl) => {return (parseInt(ppl.arriving)+parseInt(ppl.checkedins))})}</td>\r\n    </tr>\r\n  </td>\r\n  <td>\r\n   <tr class=\"table-success\">\r\n    <th>Vaccinated: </th><td>{stats.map((ppl) => {return (ppl.vaccinated)})}</td>\r\n  </tr>\r\n    <tr class=\"table-warning-v\">\r\n    <th>Vulnerables :</th><td>{stats.map((ppl) => {return (ppl.vulnerables)})}</td>\r\n    </tr>\r\n    <tr class=\"table-active\">\r\n    <th>Rate (%) :  </th><td>{stats.map((ppl) => {return (parseInt(ppl.vaccinated)*100 / (parseInt(ppl.vaccinated) + parseInt(ppl.vulnerables))\r\n       ).toFixed(2)}\r\n       )}</td>\r\n    </tr>\r\n\r\n  </td>                      \r\n  </table> \r\n\r\n      \r\n       </form> \r\n      \r\n      \r\n        {registrants.filter(registrant => {\r\n                      if (search ===\"\") {\r\n                        return registrant\r\n                      }\r\n                      else if (registrant.lname.concat(\" \").concat(registrant.fname).toLowerCase().includes(search.toLowerCase())) { \r\n                        return registrant\r\n                      }\r\n                      })\r\n                     .map((registrant) => {\r\n                      if (registrant.checkedin_flag)\r\n                      return (\r\n                            <div className=\"box-container\">\r\n                              <div key={registrant.pid} align=\"left\" className={registrant.checkedin_flag?\"true\":\"false\"}>\r\n\r\n                              <b>Name: </b>{registrant.lname}, {registrant.fname}<br />\r\n                              <b>Vaccination: </b>{registrant.vaccination?\"yes\":\"n/a\"}\r\n                              \r\n                              <span key={registrant.people_id} align=\"center\" className={registrant.vaccination?\"safe\":\"risk\"}><b></b>\r\n                              <button class=\"btn btn-warning btn-smlr\" type=\"button\" id={registrant.people_id} \r\n                                      onClick={() => {\r\n                                        CheckedVaccineSafe(registrant.people_id);\r\n                                       // disableButton(registrant.people_id);\r\n                                        }}>yes, I have</button>\r\n                              </span>\r\n                              \r\n                              <br/>\r\n                              <b>Event: </b>{registrant.event_cd}<br />\r\n                              <b><img src={registrant.profile} alt=\"profile pic\" class=\"avatar\"/></b>\r\n                              <b>\r\n                                <button type=\"button\" id={registrant.pid} className=\"btn btn-outline-success\" disabled\r\n                                        >Checked In\r\n                                </button>\r\n                                </b>\r\n                              </div>\r\n                             </div> \r\n                          )\r\n                      else {\r\n                        return (\r\n                          <div className=\"box-container\">\r\n                            <div key={registrant.pid} align=\"left\" className={registrant.checkedin_flag?\"true\":\"false\"}>\r\n\r\n                              <b>Name: </b>{registrant.lname}, {registrant.fname}<br />\r\n                              <b>Vaccination: </b>{registrant.vaccination?\"yes\":\"n/a\"}\r\n                              <span key={registrant.people_id} align=\"center\" className={registrant.vaccination?\"safe\":\"risk\"}><b></b>\r\n                              <button class=\"btn btn-warning btn-smlr\" type=\"button\" id={registrant.people_id} \r\n                                      onClick={() => {\r\n                                        CheckedVaccineSafe(registrant.people_id);\r\n                                      //  disableButton(registrant.people_id);\r\n                                        }}>yes, I have</button>\r\n                              </span>\r\n                              <br/>\r\n                              <b>Event: </b>{registrant.event_cd}<br />\r\n                              <b><img src={registrant.profile} alt=\"profile pic\" class=\"avatar\"/></b>\r\n                              <b></b>\r\n                              <button type=\"button\" id={registrant.pid} className=\"btn btn-outline-success\" active \r\n                                      onClick={() => {\r\n                                      CheckedMein(registrant.pid);\r\n                                      changeButtonText(registrant.pid);}\r\n                                      }>Check Me In\r\n                              </button>\r\n                              \r\n\r\n                            </div>\r\n                           </div> \r\n                        )\r\n                      }    \r\n        })}\r\n \r\n        </div>\r\n        \r\n    );\r\n};\r\n\r\nexport default CheckinByName;","/*\r\n  app.js- the frontend portion of the automated check in system- get the results from the scanned webcam and\r\n  use Axios to post to http://localhost:5000/scan and query the database called logindatabasev2.\r\n\r\n*/\r\n\r\nimport React, { useState } from 'react';\r\nimport {Container, Card, CardContent, makeStyles, Grid} from '@material-ui/core';\r\nimport QrReader from 'react-qr-reader';\r\nimport Axios from 'axios';\r\nimport sleep from '@react-corekit/sleep';\r\n\r\n\r\nfunction App() { \r\n  const [scanResultWebCam, setScanResultWebCam] =  useState('');\r\n  const classes = useStyles();\r\n  const [scanAuth, setScanAuth] = useState('');\r\n // const [userInfo, setUserInfo] = useState({fname:\"\", lanme:\"\", profile:\"\", event_cd:\"\"});\r\n const [userInfo, setUserInfo] = useState('')\r\n  const [userService, setUserService] = useState('');\r\n  const [hidemessage, setHideMessage] = useState(false);\r\n  const [currentDate, setCurrentDate] = useState('');\r\n  //const [currentDate, setCurrentDate] = useState('');\r\n  var audio = new Audio('https://media.geeksforgeeks.org/wp-content/uploads/20190531135120/beep.mp3');\r\n  \r\nasync function resetdisplay() {\r\n  setHideMessage(false);\r\n    await sleep(3500);\r\n   setHideMessage(true);\r\n  \r\n  }\r\nasync function resetScanner() {\r\n  await sleep(2500);\r\n  setScanResultWebCam(null);\r\n}\r\n\r\nasync function resetName() {\r\n  await sleep(2500);\r\n  setUserInfo(null);\r\n}\r\n\r\nasync function resetDate() {\r\n  await sleep(2500);\r\n  //setCurrentDate(null);\r\n  setCurrentDate('');\r\n}\r\n\r\n \r\n\r\n  //handleauthorization querys the database\r\n  const handleAuthorization = () => {\r\n    if (scanResultWebCam != null) {\r\n    let householdID = scanResultWebCam.substring(0, scanResultWebCam.indexOf(','));\r\n    let peopleID = scanResultWebCam.substring(scanResultWebCam.indexOf(',') + 1);\r\n    Axios.post('http://www.cloudority.com:5000/scan', {\r\n      people_id: peopleID,\r\n      household_id: householdID\r\n    }).then((response) => {\r\n      if (!response.data.message)\r\n      {\r\n          setScanAuth(\"Check in successfull! (成功)\");\r\n        \r\n          setUserInfo(\"Welcome: \" + response.data[0].lname +\", \" + response.data[0].fname);\r\n          //setUserInfo(response.data[0]);\r\n          //setUserService(prevState => response.data[i].event_cd + \", \" + prevState);\r\n          let numberOfServices = \"\";\r\n          if (response.data.length > 1) {\r\n              numberOfServices = \" services\";\r\n          } else {\r\n              numberOfServices = \" service\";\r\n          }\r\n          //setUserService(\"Checked in for: \" + response.data.length + numberOfServices);\r\n          response.data.forEach(element => setUserService(element.event_cd));\r\n          //setCurrentDate(\"Checked in at: \" + response.data[0].checkedIn);\r\n          \r\n          \r\n        resetScanner();\r\n        resetName();\r\n        resetDate();\r\n         \r\n      } else {\r\n        setScanAuth(response.data.message); \r\n        setUserInfo('');\r\n        setUserService('');\r\n        resetScanner();\r\n        resetName();\r\n        resetDate();\r\n      }\r\n  }); \r\n}\r\n  if ((scanResultWebCam == null) && (scanAuth==null)) {\r\n    setScanAuth(\"Processing...（進行中)\");\r\n    setUserService('');\r\n  } \r\n  \r\n  }\r\n\r\n  //handleErrorWebCam- debug purposes\r\n  const handleErrorWebCam = (error) => {\r\n    console.log(error);\r\n  }\r\n\r\n  //handleScanWebCam- handles the authorization when a qr code is scanned, returns the result of the scan.\r\n  const handleScanWebCam = (result) => {\r\n\r\n\r\n    if (result){\r\n      handleAuthorization();\r\n      resetdisplay();\r\n        setScanResultWebCam(result);\r\n        audio.play();\r\n    }\r\n    \r\n   }\r\n\r\n   //the main frontend- visuals and labels\r\n  return (\r\n\r\n<Container className={classes.conatiner}>\r\n        <Card>\r\n              <h2 className={classes.title}><span><img align='left' src='https://avatars.planningcenteronline.com/uploads/organization/217202-1482195203/avatar.1.png' alt=\"Main Church\"/>Oversea Chinese Mission (中華海外宣道會)</span></h2>\r\n              <CardContent>\r\n                <Grid container spacing={2}>\r\n                  <Grid item xl={4} lg={4} md={6} sm={12} xs={12}>\r\n                      <h6>Automated Check in System (簡易通自動報到)</h6>                    \r\n                      <QrReader \r\n                      // delay between scans\r\n                      delay={200}\r\n                      style={{width: 500, height: 500}}\r\n                      onError={handleErrorWebCam}\r\n                      onScan={handleScanWebCam}\r\n                   />\r\n                  </Grid>\r\n                  <br></br><br></br>\r\n                  <Grid item xl={4} lg={4} md={6} sm={12} xs={12}>\r\n                      <div class=\"grid-child green\">\r\n                              <div id='Welcome' hidden={hidemessage} style = {{position: 'relative', left: '150px', top: '30px'}}>\r\n                                  <h1>Status:{scanAuth}</h1> \r\n                                  <h1>{userInfo}<br></br>Service:{userService} <br></br></h1>\r\n                                  \r\n                              </div>\r\n                      </div>\r\n                  </Grid>\r\n                </Grid>                   \r\n              </CardContent>\r\n        </Card>\r\n</Container>                   \r\n  );\r\n}\r\n\r\n//the styles for the qr code scanner\r\nconst useStyles = makeStyles((theme) => ({\r\n    conatiner: {\r\n      marginTop: 10,\r\n    },\r\n    title: {\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      alignItems:  'center',\r\n      background: '#3f51b5',\r\n      color: '#fff',\r\n      padding: 20\r\n    },\r\n}));\r\nexport default App;\r\n","import React from 'react';\r\nimport CheckinByName from './CheckinByName';\r\nimport Scanner from './scanner';\r\nimport { BrowserRouter as Router, Route, Switch  } from 'react-router-dom';\r\n\r\nfunction App() {\r\n    return (\r\n        <Router>\r\n            <div className=\"App\">\r\n                <Switch>\r\n                <Route path=\"/\" exact component={CheckinByName}/>\r\n                <Route path=\"/scan\" component={Scanner}/>\r\n                </Switch>\r\n            </div>                \r\n        </Router>\r\n    );\r\n}\r\n\r\nexport default App;\r\n  ","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}